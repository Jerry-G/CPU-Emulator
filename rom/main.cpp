/* take a machine code program in hex
 * and create a bin file for loading in the machine
 *
 *
 */

#include <cstdlib>
#include <iostream>
#include <iterator>
#include <string>

int main(int argc, char *argv[]) {
  if (argc != 2) {
    printf("Usage ./main [OUT FILE]\n");
    return 1;
  }

  std::string program;
  /* loop to print all the chars
  program = "0303FFFF"
            "03000070"
            "08015C00"
            "1000200B"
            "20000000"
            "0100200D"
            "0800001D"

            "01001FEA"
            "10001FF7"

            "05000002"
            "0F001FFB"
            "0203200D"
            "050001A6"

            "02001FEA"
            "01011FE4"
            "05010100"
            "02011FE4"
            "0100200D"
            "05000001"
            "0200200D"
            "0F001FE3"
            "FE00FF00"
            "00000000";
            */

  // display helloworld.c
  program = "FE00"
            "FE00"
            "03004B20" // 1
            "20000000"
            "FE00"
            "03004C20" // 2
            "200001E0"
            "FE00"
            "03003CB0" // #
            "20000004"
            "FE00"
            "030028B0" // i
            "20000006"
            "FE00"
            "03002DB0" // n
            "20000008"
            "FE00"
            "030022B0" // c
            "2000000A"
            "FE00"
            "03002BB0" // l
            "2000000C"
            "FE00"
            "030034B0" // u
            "2000000E"
            "FE00"
            "030023B0" // d
            "20000010"
            "FE00"
            "030024B0" // e
            "20000012"
            "FE00"
            "03001C70" // <
            "20000016"
            "FE00"
            "03003270" // s
            "20000018"
            "FE00"
            "03003370" // t
            "2000001A"
            "FE00"
            "03002370" // d
            "2000001C"
            "FE00"
            "03002870" // i
            "2000001E"
            "FE00"
            "03002E70" // o
            "20000020"
            "FE00"
            "03004870" // .
            "20000022"
            "FE00"
            "03002770" // h
            "20000024"
            "FE00"
            "03001D70" // <
            "20000026"
            "FE00"
            "03004D20" // 3
            "200003C0"
            "FE00"
            "030028E0" // i
            "200003C4"
            "FE00"
            "03002DE0" // n
            "200003C6"
            "FE00"
            "030033E0" // t
            "200003C8"
            "FE00"
            "03002C80" // m
            "200003CC"
            "FE00"
            "03002080" // a
            "200003CE"
            "FE00"
            "03002880" // i
            "200003D0"
            "FE00"
            "03002D80" // n
            "200003D2"
            "FE00"
            "03004230" // (
            "200003D4"
            "FE00"
            "03004330" // )
            "200003D6"
            "FE00"
            "03005530" // {
            "200003D8"
            "FE00"
            "03004E20" // 4
            "200005A0"
            "FE00"
            "03002F80" // p
            "200005A8"
            "FE00"
            "03003180" // r
            "200005AA"
            "FE00"
            "03002880" // i
            "200005AC"
            "FE00"
            "03002D80" // n
            "200005AE"
            "FE00"
            "03003380" // t
            "200005B0"
            "FE00"
            "03002580" // f
            "200005B2"
            "FE00"
            "03004230" // (
            "200005B4"
            "FE00"
            "03001FD0" // "
            "200005B6"
            "FE00"
            "030007D0" // H
            "200005B8"
            "FE00"
            "030024D0" // e
            "200005BA"
            "FE00"
            "03002BD0" // l
            "200005BC"
            "FE00"
            "200005BE"
            "FE00"
            "03002ED0" // o
            "200005C0"
            "FE00"
            "030016D0" // W
            "200005C4"
            "FE00"
            "03002ED0" // o
            "200005C6"
            "FE00"
            "030031D0" // r
            "200005C8"
            "FE00"
            "03002BD0" // l
            "200005CA"
            "FE00"
            "030023D0" // d
            "200005CC"
            "FE00"
            "03003AD0" // !
            "200005CE"
            "FE00"
            "03001FD0" // "
            "200005D0"
            "FE00"
            "03004330" // )
            "200005D2"
            "FE00"
            "03001B30" // ;
            "200005D4"
            "FE00"
            "03004F20" // 5
            "20000780"
            "FE00"
            "030031B0" // r
            "20000788"
            "FE00"
            "030024B0" // e
            "2000078A"
            "FE00"
            "030033B0" // t
            "2000078C"
            "FE00"
            "030034B0" // u
            "2000078E"
            "FE00"
            "030031B0" // r
            "20000790"
            "FE00"
            "03002DB0" // n
            "20000792"
            "FE00"
            "03004AC0" // 0
            "20000796"
            "FE00"
            "03001B30" // ;
            "20000798"
            "FE00"
            "03005020" // 6
            "20000960"
            "FE00"
            "03005730" // }
            "20000964"
            "FE00"
            "FF00";
  // pixles redraw at end

  std::string byte = "  ";
  FILE *pFile;
  int n;
  pFile = fopen(argv[1], "w");
  for (int i = 0; i < (program.length()); i += 2) {
    byte[0] = program[i];
    byte[1] = program[i + 1];
    n = std::stoi(byte, nullptr, 16);
    fputc(n, pFile);
  }
  fclose(pFile);

  return 0;
}
